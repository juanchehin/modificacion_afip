!function(t){t.waiting=function(e,i){this.settings=t.extend({},t.waiting.defaults,i),this.element=e,this.interval=null,this.lastAnimate=0,this.position=0,this.enable()},t.waiting.defaults={className:"waiting",tag:"div",elements:5,css:{},elementsCss:{},speed:100,percent:100,auto:!1,fluid:!0,radius:!1},t.waiting.setDefaults=function(e){t.waiting.defaults=t.extend({},t.waiting.defaults,e)},t.extend(t.waiting.prototype,{enable:function(){var t="",e="",i=this.settings;this.element.addClass(i.className).css(i.css),this.interval&&this.pause();for(var n=0;n<i.elements;n++)i.radius!==!1&&(e='style="position: absolute; top: '+(i.radius*Math.sin(2*Math.PI*n/i.elements)+i.radius)+"px; left:"+(i.radius*Math.cos(2*Math.PI*n/i.elements)+i.radius)+'px;"'),t+="<"+i.tag+' class="'+i.className+"-element "+i.className+"-element-"+n+'" '+e+"></"+i.tag+">";return this.element.html(t),this.children=this.element.children().css(i.elementsCss),this.element.trigger("waiting:enable"),i.auto&&this.play(),this.element},play:function(){var t=this,e=t.settings,i=Math.ceil(this.children.length*(e.percent/100));this.interval&&this.pause();var n=function(){for(var n=0;i>n;n++){var a=t.position-n;e.fluid&&0>a&&(a=i+a),t.children[n].className=e.className+"-element "+e.className+"-element-"+n+" "+e.className+"-play-"+a}t.position++,t.position>=i&&(t.position=0)};return function a(i){t.interval=requestAnimationFrame(a),i>t.lastAnimate+e.speed&&(t.lastAnimate=i,n())}(),this.element.trigger("waiting:play"),this.element},pause:function(){return this.interval&&(cancelAnimationFrame(this.interval),this.interval=null),this.element.trigger("waiting:pause"),this.element},disable:function(){var t=this.settings,e=this.children.length;this.pause();for(var i=0;e>i;i++)this.children[i].className=t.className+"-element "+t.className+"-element-"+i;return this.position=0,this.element.trigger("waiting:disable"),this.element},destroy:function(){return this.element.trigger("waiting:destroy"),this.disable().unbind(".waiting").removeData("waiting").removeClass(this.settings.className).empty()},option:function(t,e){if(void 0!==e)return this.settings[t]=e,this.disable(),this.enable();if("string"!=typeof t){for(var i in t)this.settings[i]=t[i];return this.enable()}return this.settings[t]}}),t.waiting.lookup={i:0},t.fn.waiting=function(e){e=e||{};var i=Array.prototype.slice.call(arguments);if("string"==typeof e){if("option"==e&&"string"==typeof i[1]&&2===i.length){var n=t.waiting.lookup[t(this).data("waiting")];return n[e].apply(n,i.slice(1))}return this.each(function(){var n=t.waiting.lookup[t(this).data("waiting")];n[e].apply(n,i.slice(1))})}return this.each(function(){var i=t(this);t.waiting.lookup[++t.waiting.lookup.i]=new t.waiting(i,e),i.data("waiting",t.waiting.lookup.i)})}}(window.jQuery||window.Zepto||window.$),function(){for(var t=0,e=["ms","moz","webkit","o"],i=0;i<e.length&&!window.requestAnimationFrame;++i)window.requestAnimationFrame=window[e[i]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[i]+"CancelAnimationFrame"]||window[e[i]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e,i){var n=(new Date).getTime(),a=Math.max(0,16-(n-t)),s=window.setTimeout(function(){e(n+a)},a);return t=n+a,s}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})}();
